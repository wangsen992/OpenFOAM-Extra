/*--------------------------------*- C++ -*----------------------------------*\
  =========                 |
  \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox
   \\    /   O peration     | Website:  https://openfoam.org
    \\  /    A nd           | Version:  9
     \\/     M anipulation  |
\*---------------------------------------------------------------------------*/
FoamFile
{
    format      ascii;
    class       volScalarField;
    location    "0";
    object      T;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

// #include "boundaryConditions";
dimensions      [0 0 0 1 0 0 0];

internalField    #codeStream
{
				codeInclude
				#{
						#include "fvCFD.H"
				#};

				codeOptions
				#{
						-I${LIB_SRC}/finiteVolume/lnInclude \
						-I${LIB_SRC}/meshTools/lnInclude
				#};

				codeLibs
				#{
						-lmeshTools \
						-lfiniteVolume
				#};

				code
				#{
							const IOdictionary& d = static_cast<const IOdictionary&>(dict);
							const fvMesh& mesh = refCast<const fvMesh>(d.db());

							Info << "Running T init " << endl;

							scalarField T(mesh.nCells(), 0.);

							scalar dTdz = -0.0076;
							scalar T0 = 290;
							scalar z;

							forAll(T, i)
							{
									z = mesh.C()[i][2];
									T[i] = T0 + dTdz * z;
							}

							writeEntry(os, "", T);
				#};
};

boundaryField
{
    floor
    {
        type            fixedGradient;
				// gradient				uniform 0.0048; // this is cause a positive heat flux
				gradient				uniform 0.0076;
    }
    ceiling
    {
        type            fixedGradient;
				gradient				uniform -0.0076;
    }
    "(inlet|outlet|leftBoundary|rightBoundary)"
    {
        type            cyclic;
    }
}

// ************************************************************************* //
